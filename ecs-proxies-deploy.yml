
#docker_service_cpu: 256
#docker_service_memory: 512

docker_service:

  - name: cache-service
    port-mappings:
        - containerPort: 6379
        - hostPort: 127.0.0.1

  - name: sds-api
    expose: true
    environment:
      - name: NO_CACHE
        value: "true"
      - name: SDS_LOG_LEVEL
        value: DEBUG
      - name: SDS_LDAP_SEARCH_BASE
        value: ou=services,o=nhs
      - name: SDS_REDIS_CACHE_HOST
        value: cache-service
      - name: SDS_REDIS_DISABLE_TLS
        value: "true"
    secrets:
      - name: SDS_LDAP_URL
        valueFrom: "/ptl/platform-common/cis/ldap-uri"

    health_check:
      matcher: "200"
      path: "/healthcheck"
